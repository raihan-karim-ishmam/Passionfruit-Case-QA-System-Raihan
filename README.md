# Passionfruit CSV Q&A System

## Overview
The **Passionfruit CSV Q&A System** is a proof-of-concept (POC) project developed to address the challenges of querying complex CSV datasets using advanced language models (LLMs). With four distinct implementations, this system explores different methodologies for intelligent Q&A systems, highlighting flexibility, performance, and future scalability. Each version of the system demonstrates a unique approach to solving the problem, tailored to specific strengths and use cases.

### Motivation
The POC was developed under strict constraints, including time limitations, lack of direct user contact, and limited access to stakeholders. Despite these challenges, the goal was to demonstrate creativity, technical proficiency, and adaptability. Special appreciation goes to the assignment and case design, which was exceptionally well-structured and clearly described, making it an enjoyable and insightful challenge to work on. The approaches are designed to offer a comprehensive view of various Q&A system methodologies while showcasing potential areas for improvement and scalability.



## Versions
The repository includes four implementations of the CSV Q&A system, each exploring a different method:



### **Version 1: Intelligent CSV Agent (VectorShift)**
- **Methodology**: Utilizes VectorShift's pipeline-based approach for fast, accurate data retrieval.

![alt text](<V1 Q2.png>)

- **Strengths**:
  - Pre-built pipeline ensures seamless integration and high performance.
  - SDKs provide extensive customization options for advanced workflows.
  - Minimal coding effort required, enabling a focus on pipeline architecture and infrastructure.
- **Performance**: Covers almost all use cases effectively, delivering 100% working results.
- **Future Work**: Integrate VectorShift SDK for more control over pipeline components.

### **Version 2: Pandas AI with Bamboo LLM**
- **Methodology**: Integrates the PandasAI library with Bamboo LLM for natural language queries on tabular data.

![alt text](<V2.1 Q3.png>)

- **Strengths**:
  - Highly effective for direct, data-focused queries.
  - Advanced features like training and default response customization for future use.
  - Free tier supports initial development and experimentation.
- **Challenges**:
  - Struggles with complex, reasoning-heavy questions.
  - Limited scope for handling queries requiring external context.
- **Future Work**:
  - Implement advanced configurations like metadata indexing and training for personalized responses.
  - Extend integration with other LLMs to improve versatility.

### **Version 3: OpenAI and LangChain CSV Agent**
- **Methodology**: Combines OpenAI's GPT models with LangChain for a widely known, reliable solution.

![alt text](<V3 Q8.png>)

- **Strengths**:
  - GPT-3.5 Turbo delivers fast and highly accurate results, even for external data-based questions.
  - Simple and cost-effective for real-time applications.
- **Challenges**:
  - Initial design tokenized the entire CSV file for each query, incurring high costs.
  - Post-debugging, the workflow was optimized to upload the CSV once, but further features could not be implemented due to time constraints.
- **Future Work**:
  - Enhance with function calling for querying external datasets.
  - Implement source referencing to provide transparency in responses.

### **Version 4: Open Source Llama CSV Agent**
- **Methodology**: Leverages the open-source Llama 2 model to build a fully customizable agent.

![alt text](<V4 Q6.png>)

- **Strengths**:
  - Offers complete ownership and the potential for patentable solutions.
  - Entirely open-source, eliminating dependencies on third-party tools.
- **Challenges**:
  - Due to hardware and time constraints, the model was run in GGML format on a CPU, requiring data chunking, which reduced context and accuracy.
  - Performance was poor due to the loss of semantic connections in chunked data.
- **Future Work**:
  - Use the original Llama 2 model with GPU integration to eliminate chunking and restore full context.
  - Scale the solution to production-level infrastructure.

---

## Data Preprocessing

These preprocessing steps ensured that unconventional CSV formats were compatible with LLMs and improved overall system performance.Preprocessing was critical for all versions due to the unconventional format of the CSV file. Steps included:
- **Delimiter Normalization**: Converted unusual delimiters (e.g., `|`) into standard commas for LLM compatibility.
- **Row Normalization**: Ensured consistent column lengths by filling missing values where appropriate.
- **Error Handling**: Managed mixed numerical and text data to maintain data integrity.

These steps improved LLM performance and ensured compatibility across all implementations.

---

## Examples

An `examples` folder is included in the repository, showcasing successful outcomes generated by the system. These examples demonstrate practical use cases and the utility of the implemented approaches, offering valuable insights into how each version performs.

---

## Future Enhancements

These planned improvements aim to deliver a highly scalable, flexible, and user-focused solution, enhancing the practicality and adaptability of the Q&A system.
### Common Goals for All Versions
1. **Cloud Integration**:
   - Migrate data storage and processing to Azure or other cloud platforms for scalability.
2. **Metadata Indexing**:
   - Introduce metadata indexing to improve query efficiency and accuracy for tabular data.
3. **User Personalization**:
   - Enable personalized agent configurations for specific company requirements.
4. **Enhanced Interfaces**:
   - Develop branded and user-friendly interfaces for better user engagement.

### Specific Improvements
- **Version 1 (VectorShift)**: Use SDKs to customize the pipeline.
- **Version 2 (Pandas AI)**: Explore training and advanced configurations for tailored responses.
- **Version 3 (OpenAI)**: Add source referencing and function calling for extended data integration.
- **Version 4 (Llama 2)**: Remove chunking and leverage GPU-based processing.

---

## Acknowledgments
- **VectorShift**: For providing a robust pipeline for fast data retrieval.
- **OpenAI**: For delivering state-of-the-art GPT models.
- **LangChain**: For enabling seamless integration of language models.
- **PandasAI**: For advancing tabular data management and query capabilities.

---

*Case developed by Raihan Karim for Passionfruit. Â© 2025 Raihan Karim. All rights reserved.*

